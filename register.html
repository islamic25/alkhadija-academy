<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Register - AlKhadija Islamic Academy</title>
  <link rel="stylesheet" href="register.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- Firebase SDKs (Compat for GitHub Pages) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
</head>
<body class="register-background">

  <!-- Header -->
  <header>
    <h1>AlKhadija Islamic Academy</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="about.html">About</a>
      <a href="courses.html">Courses</a>
      <a href="contact.html">Contact</a>
      <a href="register.html" class="active">Register</a>
      <a href="login.html">Login</a>
    </nav>
  </header>

  <!-- Back Arrow -->
  <a href="javascript:history.back()" class="back-arrow">
    <i class="fas fa-arrow-left"></i> Back
  </a>

  <!-- Registration Form -->
  <section class="form-section glass-effect">
    <h2>Join the Academy</h2>
    <form class="form-box" onsubmit="registerUser(event)">
      <label for="name">Full Name</label>
      <input type="text" id="name" required />

      <label for="email">Email</label>
      <input type="email" id="email" required />

      <label for="course">Select Course</label>
      <select id="course" required>
        <option value="">-- Choose a Course --</option>
        <option value="Quran with Tajweed">Quran with Tajweed</option>
        <option value="Islamic Studies">Islamic Studies</option>
        <option value="Hadith & Fiqh">Hadith & Fiqh</option>
        <option value="Noorani Qaida">Noorani Qaida</option>
        <option value="Arabic Grammar">Arabic Grammar</option>
      </select>

      <label for="password">Password</label>
      <input type="password" id="password" required />

      <button type="submit">Register</button>
    </form>
    <p id="registerMessage" style="color: red; margin-top: 10px;"></p>
  </section>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 AlKhadija Islamic Academy</p>
  </footer>

  <!-- Firebase Config & Script -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCAAbxJ_tnUQCVLtJrBxPYKq7cYFnabhNk",
      authDomain: "alkhadija-e0cbb.firebaseapp.com",
      projectId: "alkhadija-e0cbb",
      storageBucket: "alkhadija-e0cbb.appspot.com",
      messagingSenderId: "129990677542",
      appId: "1:129990677542:web:bf397865475d7c777d02e7"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    function registerUser(event) {
      event.preventDefault();

      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const course = document.getElementById("course").value;
      const password = document.getElementById("password").value;
      const messageBox = document.getElementById("registerMessage");

      auth.createUserWithEmailAndPassword(email, password)
        .then((userCredential) => {
          const user = userCredential.user;

          // Save to Firestore
          return db.collection("users").doc(user.uid).set({
            name: name,
            email: email,
            course: course,
            createdAt: new Date()
          }).then(() => {
            // Send email verification
            return user.sendEmailVerification();
          }).then(() => {
          

            messageBox.style.color = "green";
            messageBox.textContent = "âœ… Registered! Please check your email and verify your account.";
          });
        })
        .catch((error) => {
          messageBox.style.color = "red";
          messageBox.textContent = error.message;
        });
    }
  </script>

</body>
</html>
